{"content":"<h3 id=\"_2024-11-01-yearning-3-1-9\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2024-11-01-yearning-3-1-9\"><span>2024-11-01 Yearning 3.1.9</span></a></h3>\n<ul>\n<li>Improved the stream message format for the AI assistant.</li>\n<li>Fixed the issue where the list did not refresh when creating a data source.</li>\n<li>Resolved the problem of precision loss with bigint data type (#1104).</li>\n<li>Fixed the issue where executing SQL did not support SSL connections (#1120).</li>\n<li>Added DMLWhereExprValueIsNull audit parameter: Checks if the where condition value in DML statements is null.</li>\n<li>Introduced a new audit button (#1032).</li>\n</ul>\n<h3 id=\"_2024-07-27-yearning-3-1-8\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2024-07-27-yearning-3-1-8\"><span>2024-07-27 Yearning 3.1.8</span></a></h3>\n<ul>\n<li>Implemented audit button debounce to fix abnormal data issues caused by multiple clicks.</li>\n<li>Added smart assistant functionality.</li>\n<li>Introduced SQL statement AI optimization and AI text-generated SQL functions.</li>\n<li>Enabled viewing of table structures in the query menu (#1057).</li>\n<li>Added MFA authentication (sponsored version).</li>\n<li>Fixed the problem where datetime field type detection might occasionally display errors (#1039).</li>\n<li>Resolved the issue where query audits could be submitted multiple times (#1024).</li>\n<li>Fixed the abnormal display of default audit person restrictions (#991).</li>\n<li>Updated dependencies and resolved security vulnerabilities.</li>\n<li>Updated Docker file image to fix issues with changing language settings via environment variables.</li>\n</ul>\n<h3 id=\"_2024-01-02-yearning-3-1-7\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2024-01-02-yearning-3-1-7\"><span>2024-01-02 Yearning 3.1.7</span></a></h3>\n<ul>\n<li>Fixed the error that occurred when the process status was abnormal after a flow change, causing information to not display.</li>\n<li>Added new search conditions for termination, cancellation, and pending execution in order search.</li>\n</ul>\n<h3 id=\"_2023-09-08-yearning-3-1-6-3\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2023-09-08-yearning-3-1-6-3\"><span>2023-09-08 Yearning 3.1.6.3</span></a></h3>\n<ul>\n<li>Fix: Closed #901 by resolving the issue where querying a non-existent table name or executing a DML caused the query page to freeze.</li>\n<li>Various optimizations.</li>\n</ul>\n<h3 id=\"_2023-08-10-yearning-3-1-6-2\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2023-08-10-yearning-3-1-6-2\"><span>2023-08-10 Yearning 3.1.6.2</span></a></h3>\n<ul>\n<li>Feature: Closed #832, allowing for custom audit rules on a per data source basis.</li>\n<li>Feature: Multi-language support; specify front and back-end languages via config.toml, supporting Chinese/English.</li>\n<li>Fix: Closed #848, resolving the issue where the loading indicator was not shown during query waits.</li>\n<li>Optimization: Closed #840, improved daily order number display issues on the homepage.</li>\n<li>Optimization: Closed #790, added data source column display on the order audit page.</li>\n<li>Optimization: Closed #703, supported changing execution time/immediate execution/termination of scheduled tasks.</li>\n<li>Optimization: Changed the order list sorting rule to be based on audit status and chronological order.</li>\n<li>Optimization: Supported transaction mode execution for DML data; activate this option in the audit rules by searching for DMLTransaction.</li>\n<li>Optimization: Closed #795, query keyword reminders (table names, field names) are restricted to the current database. When a database is selected, its table and field names are obtained.</li>\n<li>Optimization: Query results now support copying cell content upon click.</li>\n<li>Optimization: Specified domain address changes are now made through the settings page instead of via the -s flag; DingTalk card supports URL jumps.</li>\n<li>Various other optimizations.</li>\n</ul>\n<h3 id=\"_2023-07-04-yearning-3-1-5\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2023-07-04-yearning-3-1-5\"><span>2023-07-04 Yearning 3.1.5</span></a></h3>\n<ul>\n<li>Optimized layout on the audit detail page.</li>\n<li>Improved layout of audit buttons #829 #825 #802.</li>\n<li>Fixed exceptions in audit query time range condition formatting.</li>\n<li>Resolved errors when adding datetime fields with default values of 0000-00-00 00:00:00 #823.</li>\n<li>Corrected the issue where queries could still be audited after the person responsible had been changed.</li>\n</ul>\n<h3 id=\"_2023-04-24-yearning-3-1-4\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2023-04-24-yearning-3-1-4\"><span>2023-04-24 Yearning 3.1.4</span></a></h3>\n<ul>\n<li>Transitioned from polling to WebSocket for real-time data retrieval in orders/query lists.</li>\n<li>Order/query details are displayed using a card drawer style.</li>\n<li>Fixed the issue where executing query statements with too many columns in Google Chrome would cause the browser to enlarge excessively #789.</li>\n<li>Added ARMv64 support.</li>\n</ul>\n<h3 id=\"_2023-03-09-yearning-3-1-3\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2023-03-09-yearning-3-1-3\"><span>2023-03-09 Yearning 3.1.3</span></a></h3>\n<ul>\n<li>Resolved issues with gh-ost execution.</li>\n<li>Fixed order list refresh anomalies.</li>\n<li>Addressed the problem where execution information could not be displayed when DML statements were executed without backup.</li>\n</ul>\n<h3 id=\"_2023-02-10-yearning-3-1-2-2\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2023-02-10-yearning-3-1-2-2\"><span>2023-02-10 Yearning 3.1.2.2</span></a></h3>\n<ul>\n<li>Fixed the Firefox browser header style blocking issue #637.</li>\n<li>Resolved insert statement audit anomalies #760 #759 #755.</li>\n</ul>\n<h3 id=\"_2023-02-01-yearning-3-1-2-1\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2023-02-01-yearning-3-1-2-1\"><span>2023-02-01 Yearning 3.1.2.1</span></a></h3>\n<ul>\n<li>Corrected the order anomaly issue post-query audit order submission.</li>\n<li>Resolved the problem where the bulletin board data could not be saved.</li>\n<li>Fixed the display error in password creation validation documentation.</li>\n<li>Addressed enumeration audit anomalies.</li>\n<li>Rectified syntax detection issues when the default value of timestamp fields is a string.</li>\n<li>Resolved audit anomalies in insert into statements where column and value list numbers do not match.</li>\n<li>Added support for drop table if exists statements.</li>\n<li>Supported SSL connection for data sources.</li>\n</ul>\n<h3 id=\"_2022-11-14-yearning-3-1-1-1\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2022-11-14-yearning-3-1-1-1\"><span>2022-11-14 Yearning 3.1.1.1</span></a></h3>\n<ul>\n<li>Resolved the issue where rollback statements executed in ascending order, causing dependency errors (changed to descending order).</li>\n<li>Adjusted debounce logic to prevent duplicate submissions.</li>\n<li>Fixed the issue where querying with an order time didn't work.</li>\n<li>Corrected anomalies in rollback statements when changing table character sets.</li>\n<li>Fixed the problem allowing submission of empty SQL statements.</li>\n<li>Implemented front-end caching for list pages.</li>\n<li>Resolved audit anomalies with enumerations.</li>\n<li>Fixed the issue where execution time was not displayed.</li>\n<li>Corrected errors in creating separate index statements for table rollback statements.</li>\n<li>Fixed the admin authorization statement error during installation initialization.</li>\n</ul>\n<h3 id=\"_2022-09-15-yearning-3-1-0\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2022-09-15-yearning-3-1-0\"><span>2022-09-15 Yearning 3.1.0</span></a></h3>\n<ul>\n<li>Resolved the issue of SQL connections not being released after detection/execution.</li>\n<li>Fixed the issue where auditors couldn't perform audits without data source permissions.</li>\n</ul>\n<h3 id=\"_2022-09-01-yearning-3-0-9\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2022-09-01-yearning-3-0-9\"><span>2022-09-01 Yearning 3.0.9</span></a></h3>\n<ul>\n<li>Optimized the audit list to prevent freezing with large batches of SQL.</li>\n<li>Enhanced the layout for the white theme.</li>\n<li>Corrected email sending issues for SSL non-465 ports.</li>\n</ul>\n<h3 id=\"_2022-08-18-yearning-3-0-8\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2022-08-18-yearning-3-0-8\"><span>2022-08-18 Yearning 3.0.8</span></a></h3>\n<ul>\n<li>Added i18n English support (currently for front-end content only).</li>\n<li>Fixed the narrative and title errors in push notifications (affecting versions &gt;= 3.0.5).</li>\n<li>Resolved issues with switching databases when special symbols are included in the database name during queries (#661).</li>\n<li>Enhanced migration script experience (for migrations from version 2.3.5 to 3.x).</li>\n</ul>\n<h3 id=\"_2022-08-18-yearning-3-0-7\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2022-08-18-yearning-3-0-7\"><span>2022-08-18 Yearning 3.0.7</span></a></h3>\n<ul>\n<li>Resolved issues with test message not sending.</li>\n<li>Fixed console errors in order time field queries.</li>\n<li>Addressed issues of duplicate order submissions.</li>\n<li>Corrected disordered column sequences in exported XLS queries.</li>\n<li>Improved the visualization of query results.</li>\n<li>Enhanced style for order detail progress information.</li>\n<li>Improved container deployment with custom secret key support.</li>\n<li>Optimized OIDC login logic.</li>\n</ul>\n<h3 id=\"_2022-08-11-yearning-3-0-6\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2022-08-11-yearning-3-0-6\"><span>2022-08-11 Yearning 3.0.6</span></a></h3>\n<ul>\n<li>Enhanced WebSocket query reconnection logic.</li>\n<li>Fixed tab display anomalies in query results.</li>\n<li>Solved message format issues in version 3.0.5.</li>\n<li>Resolved issues with certain query formats causing sensitive data exposure.</li>\n</ul>\n<h3 id=\"_2022-08-06-yearning-3-0-5\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2022-08-06-yearning-3-0-5\"><span>2022-08-06 Yearning 3.0.5</span></a></h3>\n<ul>\n<li>Fixed freezing issues when more than 10 DDL statements were submitted.</li>\n<li>Resolved length error issues when checking enum types.</li>\n<li>Addressed security issues in order/query during testing/query operations.</li>\n<li>Introduced query abbreviation display.</li>\n<li>Optimized query logic for increased connection utilization efficiency.</li>\n<li>Fixed repeated prompts in multi-window auto-suggestion scenarios.</li>\n</ul>\n<h3 id=\"_2022-07-23-yearning-3-0-4\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2022-07-23-yearning-3-0-4\"><span>2022-07-23 Yearning 3.0.4</span></a></h3>\n<ul>\n<li>Fixed issues preventing order revoking.</li>\n<li>Corrected homepage narrative errors.</li>\n<li>Resolved anomalies in order application searches.</li>\n<li>Fixed execution failure document anomalies.</li>\n<li>Addressed issues preventing rollback statement generation for orders.</li>\n<li>Corrected initialization issues with missing table structures.</li>\n</ul>\n<h3 id=\"_2022-07-19-yearning-3-0-3\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2022-07-19-yearning-3-0-3\"><span>2022-07-19 Yearning 3.0.3</span></a></h3>\n<ul>\n<li>Resolved issues with unusable data clearance.</li>\n<li>Fixed insufficient field length preventing order submission.</li>\n<li>Addressed browser SessionStorage quota exceedance issues due to large query suggestions.</li>\n<li>Fixed issues allowing submission of rollback statements even when empty.</li>\n<li>Resolved AUTO_INCREMENT DDL audit errors.</li>\n<li>Solved user addition issues.</li>\n<li>Fixed database name expansion issues when switching data sources with identical names.</li>\n<li>Corrected keyword check anomalies.</li>\n<li>Resolved panic anomalies in Docker installations (#610).</li>\n<li>Fixed issues with inserting millisecond-accurate datetime(3) values (#616).</li>\n<li>Resolved issues preventing the dropping of composite indexes in SQL checks; PK AUTOINCREMENT columns must not be deleted (#612).</li>\n<li>Added support for DRDS 2.0.</li>\n<li>Included order description display in audit details.</li>\n<li>Added detection/beautification button prompts.</li>\n<li>Upgraded gorm to version v2.</li>\n<li>Optimized code organization and upgraded to Go 1.18 for the development environment.</li>\n</ul>\n<h3 id=\"_2022-06-20-yearning-3-0-1\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2022-06-20-yearning-3-0-1\"><span>2022-06-20 Yearning 3.0.1</span></a></h3>\n<ul>\n<li>Added functionality for users to revoke orders.</li>\n<li>Enabled switching of query data sources.</li>\n<li>Implemented session end function for users in queries.</li>\n<li>Optimized query audit logic; orders requiring query audits cannot switch data sources.</li>\n<li>Fixed issues preventing modification of data source names.</li>\n<li>Enhanced data source query logic.</li>\n<li>Introduced DDLAllowMultiAlter audit rule, enabling multiple alter statements in a single DDL order.</li>\n<li>Fixed issues where editing a process replaced old processes when creating a new one.</li>\n</ul>\n<h3 id=\"_2022-06-02-yearning-3-0-0-ga\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2022-06-02-yearning-3-0-0-ga\"><span>2022-06-02 Yearning 3.0.0-GA</span></a></h3>\n<p><strong>Design</strong></p>\n<ol>\n<li>Redesigned the front-end interface using vite+vue3.2 development model. The default theme is dark, with an option for theme switching, which can be changed in personal settings.</li>\n<li>Unified layout and design language.</li>\n<li>Optimized order application layout to use a card style with full-text search support.</li>\n<li>Completely redesigned audit/query details page.</li>\n</ol>\n<p><strong>Review Engine</strong></p>\n<ol>\n<li>Completely restructured review engine with added hit cache, significantly improving performance in auditing batch SQLs.</li>\n<li>Optimized related code to reduce redundant logic.</li>\n<li>Supports execution of gh/osc scripts.</li>\n<li>Supports context-aware audits for SQL statements.</li>\n<li>Upgraded AST syntax tree to the latest version.</li>\n</ol>\n<p><strong>Query</strong></p>\n<ol>\n<li>A brand-new query interface, supporting shortcuts for clipboard access and database/table searches.</li>\n<li>Allows querying table data by right-clicking on the table name.</li>\n<li>The editor supports running selected or multiple queries simultaneously and via shortcuts.</li>\n<li>Changed export file format to XLS.</li>\n<li>Converted query connections to WebSocket, eliminating timeouts during prolonged SQL execution.</li>\n<li>Compressed query data using msgpack format to significantly reduce size.</li>\n<li>The query table supports resizing and width adjustments via drag-and-drop.</li>\n<li>Auto-suggestions now associate to the field level.</li>\n<li>Drastically improved performance for desensitized queries.</li>\n<li>Fixed the issue where query state did not update in time if query duration exceeded limits.</li>\n<li>Optimized desensitization logic to be data source-based rather than global.</li>\n<li>Added query history records, allowing one-click copy of SQL statements executed during the current query session.</li>\n</ol>\n<p><strong>Audit</strong></p>\n<ol>\n<li>Users no longer need to choose a superior auditor; the system automatically sends it to the flow node's auditor. If multiple auditors exist, they all have audit rights, but only one can change the state.</li>\n<li>Added exit/refresh confirmation prompts on the order submission page.</li>\n<li>Introduced a comment function for SQL orders.</li>\n<li>OSC progress now displays complete execution information instead of just a percentage, making troubleshooting easier.</li>\n</ol>\n<p><strong>Others</strong></p>\n<ol>\n<li>Optimized exclusion of databases to be based on data sources instead of global.</li>\n<li>Decoupled processes from environments; processes can bind to one or more data sources.</li>\n<li>Optimized scheduled execution to ensure that initialization only occurs before actual execution when wait time exceeds MySQL's max connection timeout.</li>\n<li>Added a user watermark feature.</li>\n<li>Introduced a data source leader, who will also serve as the query auditor.</li>\n<li>Added an LDAP test user option, optimizing LDAP test results logic.</li>\n<li>Added LDAP user attribute mapping, enabling mapped fields from LDAP into specified Yearning user fields. This allows automatic updating of real name, department, and email upon LDAP user login.</li>\n<li>Added a debounce mechanism to optimize order submission, checking, and login actions to prevent multiple submissions from rapid clicks.</li>\n</ol>\n<h4 id=\"update-from-version-2-3-5-to-3-0\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#update-from-version-2-3-5-to-3-0\"><span>Update from Version 2.3.5 to 3.0</span></a></h4>\n<p><strong>Current RC version only supports updates from 2.3.5</strong></p>\n<ol>\n<li>Backup the original Yearning database.</li>\n<li>Execute the <strong>migrate</strong> binary file in the Yearning directory. Ensure this is done <strong>before</strong> starting Yearning!</li>\n<li>Start Yearning normally.</li>\n</ol>\n<p><strong>Since the process, database exclusion, and desensitization logic have changed to be data source-based, please modify the configuration at the data source post-update.</strong></p>\n<h3 id=\"_2022-05-27-yearning-3-0-0-rc13\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2022-05-27-yearning-3-0-0-rc13\"><span>2022-05-27 Yearning 3.0.0-RC13</span></a></h3>\n<ul>\n<li>Fixed SQL rollback panic under high concurrency.</li>\n<li>Addressed migration tool issues causing user permission exceptions when user groups are empty.</li>\n<li>Fixed errors resulting from incorrect secret keys.</li>\n<li>Resolved issues where the editor allowed selection of statements for testing during audit and order detection.</li>\n<li>Added refresh button to the audit page.</li>\n<li>Fixed form validation errors during order submissions.</li>\n<li>Optimized card-header style.</li>\n</ul>\n<h3 id=\"_2022-05-20-yearning-3-0-0-rc12\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2022-05-20-yearning-3-0-0-rc12\"><span>2022-05-20 Yearning 3.0.0-RC12</span></a></h3>\n<ul>\n<li>Corrected command prompt errors in startup parameters (—config corrected to -config).</li>\n<li>Fixed issue where the registration popup on login would not close post-registration.</li>\n<li>Fixed validation checks for DDL statements with empty string defaults.</li>\n<li>Resolved issues with varchar type field length checks based on byte length.</li>\n<li>Fixed problems where DML/DDL affect row count was not effective.</li>\n<li>Resolved issue of agreeing to audit SQL statements without prior checks.</li>\n<li>Addressed issues where data submission buttons were not disabled after SQL checks.</li>\n<li>Fixed connection interruption due to prolonged idle wait times.</li>\n</ul>\n<h3 id=\"_2022-05-11-yearning-3-0-0-rc11\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2022-05-11-yearning-3-0-0-rc11\"><span>2022-05-11 Yearning 3.0.0-RC11</span></a></h3>\n<ul>\n<li>Enhanced the display of the normal theme.</li>\n<li>Resolved anomalies in audit rules requiring table creation with fields.</li>\n<li>Fixed issue allowing system re-entry through back operation after logout.</li>\n<li>Resolved panic issues with the migration tool.</li>\n</ul>\n<h3 id=\"_2022-05-09-yearning-3-0-0-rc10\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2022-05-09-yearning-3-0-0-rc10\"><span>2022-05-09 Yearning 3.0.0-RC10</span></a></h3>\n<ul>\n<li>Added merge function for DDL audit alter statements.</li>\n<li>Introduced search function in order application selection box.</li>\n<li>Added theme change feature under Personal Settings in the top header.</li>\n<li>Fixed issue preventing users from returning to the query portal if a query order was ended early by the auditor.</li>\n</ul>\n<h3 id=\"_2022-05-07-yearning-3-0-0-rc9\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2022-05-07-yearning-3-0-0-rc9\"><span>2022-05-07 Yearning 3.0.0-RC9</span></a></h3>\n<ul>\n<li>Fixed failures caused by added spaces post-SQL beautification.</li>\n<li>Optimized related button text.</li>\n<li>Corrected display anomalies in resubmission and rollback statement submission buttons.</li>\n<li>Added loading indicator for data source test connections.</li>\n</ul>\n<h2 id=\"change-log\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#change-log\"><span>Change Log</span></a></h2>\n<h3 id=\"_2022-05-06-yearning-3-0-0-rc8\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2022-05-06-yearning-3-0-0-rc8\"><span>2022-05-06 Yearning 3.0.0-RC8</span></a></h3>\n<ul>\n<li>Fixed incorrect text prompts when deleting a data source.</li>\n<li>Added a confirmation prompt box for order approval.</li>\n<li>Resolved the issue where executing an empty SQL statement in an order caused a program crash.</li>\n<li>Fixed issues in the migration script that did not process query data source information.</li>\n<li>Introduced LDAP test user option, improving LDAP test result feedback.</li>\n<li>Added LDAP user attribute mapping, enabling LDAP fields to be mapped into Yearning user fields. This allows LDAP users to log in and automatically update their real names, departments, and emails.</li>\n<li>Added query history feature, allowing users to copy previously executed SQL statements within the current session.</li>\n<li>Added a role for data source leaders, who will act as query auditors.</li>\n<li>Changed login background video to prevent dizziness.</li>\n<li>Introduced a debounce mechanism to optimize order submission, checking, and login actions, preventing multiple submissions from rapid clicks.</li>\n</ul>\n<p>Yearning uses automatic table structure synchronization, so no manual updates are required. Simply <strong>stop the existing service, replace the installation package, and then restart</strong> to apply updates.</p>\n<blockquote>\n<p>In some specific upgrade situations (destructive changes), manual data synchronization is necessary. If the version update announcement doesn't mention destructive upgrades, you can ignore the following command:</p>\n</blockquote>\n<div class=\"language-shell line-numbers-mode\" data-ext=\"shell\" data-title=\"shell\"><button class=\"copy\" title=\"Copy code\" data-copied=\"Copied\"></button><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code><span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">./Yearning</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> migrate</span></span></code></pre>\n\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div></div></div><div class=\"hint-container warning\">\n<p class=\"hint-container-title\">Warning</p>\n<h4 id=\"upgrading-from-version-2-3-5-to-3-0-0\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#upgrading-from-version-2-3-5-to-3-0-0\"><span>Upgrading from Version 2.3.5 to 3.0.0</span></a></h4>\n<p><strong>Current RC version supports migration only from version 2.3.5</strong></p>\n<ol>\n<li>\n<p>Backup the original Yearning database.</p>\n</li>\n<li>\n<p>Execute the <strong>./migrate</strong> binary file in the Yearning directory. Ensure this is done <strong>before</strong> starting Yearning!</p>\n</li>\n<li>\n<p>Start Yearning normally.</p>\n</li>\n</ol>\n</div>\n<div class=\"hint-container caution\">\n<p class=\"hint-container-title\">Caution</p>\n<p>In some new versions, there may be additional changes. Please close and reopen the Yearning page to log in again after the update.\nSince processes, exclusion of databases, and desensitization logic have changed to be data source-based, modify configurations in the data sources after updating.</p>\n</div>\n","env":{"base":"/","filePath":"/root/guide/docs/notes/update/update.md","filePathRelative":"notes/update/update.md","frontmatter":{"title":"Change Logs","createTime":"2024/11/04 16:20:19","permalink":"/article/amegqavl/"},"sfcBlocks":{"template":{"type":"template","content":"<template><h3 id=\"_2024-11-01-yearning-3-1-9\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2024-11-01-yearning-3-1-9\"><span>2024-11-01 Yearning 3.1.9</span></a></h3>\n<ul>\n<li>Improved the stream message format for the AI assistant.</li>\n<li>Fixed the issue where the list did not refresh when creating a data source.</li>\n<li>Resolved the problem of precision loss with bigint data type (#1104).</li>\n<li>Fixed the issue where executing SQL did not support SSL connections (#1120).</li>\n<li>Added DMLWhereExprValueIsNull audit parameter: Checks if the where condition value in DML statements is null.</li>\n<li>Introduced a new audit button (#1032).</li>\n</ul>\n<h3 id=\"_2024-07-27-yearning-3-1-8\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2024-07-27-yearning-3-1-8\"><span>2024-07-27 Yearning 3.1.8</span></a></h3>\n<ul>\n<li>Implemented audit button debounce to fix abnormal data issues caused by multiple clicks.</li>\n<li>Added smart assistant functionality.</li>\n<li>Introduced SQL statement AI optimization and AI text-generated SQL functions.</li>\n<li>Enabled viewing of table structures in the query menu (#1057).</li>\n<li>Added MFA authentication (sponsored version).</li>\n<li>Fixed the problem where datetime field type detection might occasionally display errors (#1039).</li>\n<li>Resolved the issue where query audits could be submitted multiple times (#1024).</li>\n<li>Fixed the abnormal display of default audit person restrictions (#991).</li>\n<li>Updated dependencies and resolved security vulnerabilities.</li>\n<li>Updated Docker file image to fix issues with changing language settings via environment variables.</li>\n</ul>\n<h3 id=\"_2024-01-02-yearning-3-1-7\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2024-01-02-yearning-3-1-7\"><span>2024-01-02 Yearning 3.1.7</span></a></h3>\n<ul>\n<li>Fixed the error that occurred when the process status was abnormal after a flow change, causing information to not display.</li>\n<li>Added new search conditions for termination, cancellation, and pending execution in order search.</li>\n</ul>\n<h3 id=\"_2023-09-08-yearning-3-1-6-3\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2023-09-08-yearning-3-1-6-3\"><span>2023-09-08 Yearning 3.1.6.3</span></a></h3>\n<ul>\n<li>Fix: Closed #901 by resolving the issue where querying a non-existent table name or executing a DML caused the query page to freeze.</li>\n<li>Various optimizations.</li>\n</ul>\n<h3 id=\"_2023-08-10-yearning-3-1-6-2\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2023-08-10-yearning-3-1-6-2\"><span>2023-08-10 Yearning 3.1.6.2</span></a></h3>\n<ul>\n<li>Feature: Closed #832, allowing for custom audit rules on a per data source basis.</li>\n<li>Feature: Multi-language support; specify front and back-end languages via config.toml, supporting Chinese/English.</li>\n<li>Fix: Closed #848, resolving the issue where the loading indicator was not shown during query waits.</li>\n<li>Optimization: Closed #840, improved daily order number display issues on the homepage.</li>\n<li>Optimization: Closed #790, added data source column display on the order audit page.</li>\n<li>Optimization: Closed #703, supported changing execution time/immediate execution/termination of scheduled tasks.</li>\n<li>Optimization: Changed the order list sorting rule to be based on audit status and chronological order.</li>\n<li>Optimization: Supported transaction mode execution for DML data; activate this option in the audit rules by searching for DMLTransaction.</li>\n<li>Optimization: Closed #795, query keyword reminders (table names, field names) are restricted to the current database. When a database is selected, its table and field names are obtained.</li>\n<li>Optimization: Query results now support copying cell content upon click.</li>\n<li>Optimization: Specified domain address changes are now made through the settings page instead of via the -s flag; DingTalk card supports URL jumps.</li>\n<li>Various other optimizations.</li>\n</ul>\n<h3 id=\"_2023-07-04-yearning-3-1-5\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2023-07-04-yearning-3-1-5\"><span>2023-07-04 Yearning 3.1.5</span></a></h3>\n<ul>\n<li>Optimized layout on the audit detail page.</li>\n<li>Improved layout of audit buttons #829 #825 #802.</li>\n<li>Fixed exceptions in audit query time range condition formatting.</li>\n<li>Resolved errors when adding datetime fields with default values of 0000-00-00 00:00:00 #823.</li>\n<li>Corrected the issue where queries could still be audited after the person responsible had been changed.</li>\n</ul>\n<h3 id=\"_2023-04-24-yearning-3-1-4\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2023-04-24-yearning-3-1-4\"><span>2023-04-24 Yearning 3.1.4</span></a></h3>\n<ul>\n<li>Transitioned from polling to WebSocket for real-time data retrieval in orders/query lists.</li>\n<li>Order/query details are displayed using a card drawer style.</li>\n<li>Fixed the issue where executing query statements with too many columns in Google Chrome would cause the browser to enlarge excessively #789.</li>\n<li>Added ARMv64 support.</li>\n</ul>\n<h3 id=\"_2023-03-09-yearning-3-1-3\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2023-03-09-yearning-3-1-3\"><span>2023-03-09 Yearning 3.1.3</span></a></h3>\n<ul>\n<li>Resolved issues with gh-ost execution.</li>\n<li>Fixed order list refresh anomalies.</li>\n<li>Addressed the problem where execution information could not be displayed when DML statements were executed without backup.</li>\n</ul>\n<h3 id=\"_2023-02-10-yearning-3-1-2-2\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2023-02-10-yearning-3-1-2-2\"><span>2023-02-10 Yearning 3.1.2.2</span></a></h3>\n<ul>\n<li>Fixed the Firefox browser header style blocking issue #637.</li>\n<li>Resolved insert statement audit anomalies #760 #759 #755.</li>\n</ul>\n<h3 id=\"_2023-02-01-yearning-3-1-2-1\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2023-02-01-yearning-3-1-2-1\"><span>2023-02-01 Yearning 3.1.2.1</span></a></h3>\n<ul>\n<li>Corrected the order anomaly issue post-query audit order submission.</li>\n<li>Resolved the problem where the bulletin board data could not be saved.</li>\n<li>Fixed the display error in password creation validation documentation.</li>\n<li>Addressed enumeration audit anomalies.</li>\n<li>Rectified syntax detection issues when the default value of timestamp fields is a string.</li>\n<li>Resolved audit anomalies in insert into statements where column and value list numbers do not match.</li>\n<li>Added support for drop table if exists statements.</li>\n<li>Supported SSL connection for data sources.</li>\n</ul>\n<h3 id=\"_2022-11-14-yearning-3-1-1-1\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2022-11-14-yearning-3-1-1-1\"><span>2022-11-14 Yearning 3.1.1.1</span></a></h3>\n<ul>\n<li>Resolved the issue where rollback statements executed in ascending order, causing dependency errors (changed to descending order).</li>\n<li>Adjusted debounce logic to prevent duplicate submissions.</li>\n<li>Fixed the issue where querying with an order time didn't work.</li>\n<li>Corrected anomalies in rollback statements when changing table character sets.</li>\n<li>Fixed the problem allowing submission of empty SQL statements.</li>\n<li>Implemented front-end caching for list pages.</li>\n<li>Resolved audit anomalies with enumerations.</li>\n<li>Fixed the issue where execution time was not displayed.</li>\n<li>Corrected errors in creating separate index statements for table rollback statements.</li>\n<li>Fixed the admin authorization statement error during installation initialization.</li>\n</ul>\n<h3 id=\"_2022-09-15-yearning-3-1-0\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2022-09-15-yearning-3-1-0\"><span>2022-09-15 Yearning 3.1.0</span></a></h3>\n<ul>\n<li>Resolved the issue of SQL connections not being released after detection/execution.</li>\n<li>Fixed the issue where auditors couldn't perform audits without data source permissions.</li>\n</ul>\n<h3 id=\"_2022-09-01-yearning-3-0-9\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2022-09-01-yearning-3-0-9\"><span>2022-09-01 Yearning 3.0.9</span></a></h3>\n<ul>\n<li>Optimized the audit list to prevent freezing with large batches of SQL.</li>\n<li>Enhanced the layout for the white theme.</li>\n<li>Corrected email sending issues for SSL non-465 ports.</li>\n</ul>\n<h3 id=\"_2022-08-18-yearning-3-0-8\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2022-08-18-yearning-3-0-8\"><span>2022-08-18 Yearning 3.0.8</span></a></h3>\n<ul>\n<li>Added i18n English support (currently for front-end content only).</li>\n<li>Fixed the narrative and title errors in push notifications (affecting versions &gt;= 3.0.5).</li>\n<li>Resolved issues with switching databases when special symbols are included in the database name during queries (#661).</li>\n<li>Enhanced migration script experience (for migrations from version 2.3.5 to 3.x).</li>\n</ul>\n<h3 id=\"_2022-08-18-yearning-3-0-7\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2022-08-18-yearning-3-0-7\"><span>2022-08-18 Yearning 3.0.7</span></a></h3>\n<ul>\n<li>Resolved issues with test message not sending.</li>\n<li>Fixed console errors in order time field queries.</li>\n<li>Addressed issues of duplicate order submissions.</li>\n<li>Corrected disordered column sequences in exported XLS queries.</li>\n<li>Improved the visualization of query results.</li>\n<li>Enhanced style for order detail progress information.</li>\n<li>Improved container deployment with custom secret key support.</li>\n<li>Optimized OIDC login logic.</li>\n</ul>\n<h3 id=\"_2022-08-11-yearning-3-0-6\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2022-08-11-yearning-3-0-6\"><span>2022-08-11 Yearning 3.0.6</span></a></h3>\n<ul>\n<li>Enhanced WebSocket query reconnection logic.</li>\n<li>Fixed tab display anomalies in query results.</li>\n<li>Solved message format issues in version 3.0.5.</li>\n<li>Resolved issues with certain query formats causing sensitive data exposure.</li>\n</ul>\n<h3 id=\"_2022-08-06-yearning-3-0-5\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2022-08-06-yearning-3-0-5\"><span>2022-08-06 Yearning 3.0.5</span></a></h3>\n<ul>\n<li>Fixed freezing issues when more than 10 DDL statements were submitted.</li>\n<li>Resolved length error issues when checking enum types.</li>\n<li>Addressed security issues in order/query during testing/query operations.</li>\n<li>Introduced query abbreviation display.</li>\n<li>Optimized query logic for increased connection utilization efficiency.</li>\n<li>Fixed repeated prompts in multi-window auto-suggestion scenarios.</li>\n</ul>\n<h3 id=\"_2022-07-23-yearning-3-0-4\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2022-07-23-yearning-3-0-4\"><span>2022-07-23 Yearning 3.0.4</span></a></h3>\n<ul>\n<li>Fixed issues preventing order revoking.</li>\n<li>Corrected homepage narrative errors.</li>\n<li>Resolved anomalies in order application searches.</li>\n<li>Fixed execution failure document anomalies.</li>\n<li>Addressed issues preventing rollback statement generation for orders.</li>\n<li>Corrected initialization issues with missing table structures.</li>\n</ul>\n<h3 id=\"_2022-07-19-yearning-3-0-3\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2022-07-19-yearning-3-0-3\"><span>2022-07-19 Yearning 3.0.3</span></a></h3>\n<ul>\n<li>Resolved issues with unusable data clearance.</li>\n<li>Fixed insufficient field length preventing order submission.</li>\n<li>Addressed browser SessionStorage quota exceedance issues due to large query suggestions.</li>\n<li>Fixed issues allowing submission of rollback statements even when empty.</li>\n<li>Resolved AUTO_INCREMENT DDL audit errors.</li>\n<li>Solved user addition issues.</li>\n<li>Fixed database name expansion issues when switching data sources with identical names.</li>\n<li>Corrected keyword check anomalies.</li>\n<li>Resolved panic anomalies in Docker installations (#610).</li>\n<li>Fixed issues with inserting millisecond-accurate datetime(3) values (#616).</li>\n<li>Resolved issues preventing the dropping of composite indexes in SQL checks; PK AUTOINCREMENT columns must not be deleted (#612).</li>\n<li>Added support for DRDS 2.0.</li>\n<li>Included order description display in audit details.</li>\n<li>Added detection/beautification button prompts.</li>\n<li>Upgraded gorm to version v2.</li>\n<li>Optimized code organization and upgraded to Go 1.18 for the development environment.</li>\n</ul>\n<h3 id=\"_2022-06-20-yearning-3-0-1\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2022-06-20-yearning-3-0-1\"><span>2022-06-20 Yearning 3.0.1</span></a></h3>\n<ul>\n<li>Added functionality for users to revoke orders.</li>\n<li>Enabled switching of query data sources.</li>\n<li>Implemented session end function for users in queries.</li>\n<li>Optimized query audit logic; orders requiring query audits cannot switch data sources.</li>\n<li>Fixed issues preventing modification of data source names.</li>\n<li>Enhanced data source query logic.</li>\n<li>Introduced DDLAllowMultiAlter audit rule, enabling multiple alter statements in a single DDL order.</li>\n<li>Fixed issues where editing a process replaced old processes when creating a new one.</li>\n</ul>\n<h3 id=\"_2022-06-02-yearning-3-0-0-ga\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2022-06-02-yearning-3-0-0-ga\"><span>2022-06-02 Yearning 3.0.0-GA</span></a></h3>\n<p><strong>Design</strong></p>\n<ol>\n<li>Redesigned the front-end interface using vite+vue3.2 development model. The default theme is dark, with an option for theme switching, which can be changed in personal settings.</li>\n<li>Unified layout and design language.</li>\n<li>Optimized order application layout to use a card style with full-text search support.</li>\n<li>Completely redesigned audit/query details page.</li>\n</ol>\n<p><strong>Review Engine</strong></p>\n<ol>\n<li>Completely restructured review engine with added hit cache, significantly improving performance in auditing batch SQLs.</li>\n<li>Optimized related code to reduce redundant logic.</li>\n<li>Supports execution of gh/osc scripts.</li>\n<li>Supports context-aware audits for SQL statements.</li>\n<li>Upgraded AST syntax tree to the latest version.</li>\n</ol>\n<p><strong>Query</strong></p>\n<ol>\n<li>A brand-new query interface, supporting shortcuts for clipboard access and database/table searches.</li>\n<li>Allows querying table data by right-clicking on the table name.</li>\n<li>The editor supports running selected or multiple queries simultaneously and via shortcuts.</li>\n<li>Changed export file format to XLS.</li>\n<li>Converted query connections to WebSocket, eliminating timeouts during prolonged SQL execution.</li>\n<li>Compressed query data using msgpack format to significantly reduce size.</li>\n<li>The query table supports resizing and width adjustments via drag-and-drop.</li>\n<li>Auto-suggestions now associate to the field level.</li>\n<li>Drastically improved performance for desensitized queries.</li>\n<li>Fixed the issue where query state did not update in time if query duration exceeded limits.</li>\n<li>Optimized desensitization logic to be data source-based rather than global.</li>\n<li>Added query history records, allowing one-click copy of SQL statements executed during the current query session.</li>\n</ol>\n<p><strong>Audit</strong></p>\n<ol>\n<li>Users no longer need to choose a superior auditor; the system automatically sends it to the flow node's auditor. If multiple auditors exist, they all have audit rights, but only one can change the state.</li>\n<li>Added exit/refresh confirmation prompts on the order submission page.</li>\n<li>Introduced a comment function for SQL orders.</li>\n<li>OSC progress now displays complete execution information instead of just a percentage, making troubleshooting easier.</li>\n</ol>\n<p><strong>Others</strong></p>\n<ol>\n<li>Optimized exclusion of databases to be based on data sources instead of global.</li>\n<li>Decoupled processes from environments; processes can bind to one or more data sources.</li>\n<li>Optimized scheduled execution to ensure that initialization only occurs before actual execution when wait time exceeds MySQL's max connection timeout.</li>\n<li>Added a user watermark feature.</li>\n<li>Introduced a data source leader, who will also serve as the query auditor.</li>\n<li>Added an LDAP test user option, optimizing LDAP test results logic.</li>\n<li>Added LDAP user attribute mapping, enabling mapped fields from LDAP into specified Yearning user fields. This allows automatic updating of real name, department, and email upon LDAP user login.</li>\n<li>Added a debounce mechanism to optimize order submission, checking, and login actions to prevent multiple submissions from rapid clicks.</li>\n</ol>\n<h4 id=\"update-from-version-2-3-5-to-3-0\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#update-from-version-2-3-5-to-3-0\"><span>Update from Version 2.3.5 to 3.0</span></a></h4>\n<p><strong>Current RC version only supports updates from 2.3.5</strong></p>\n<ol>\n<li>Backup the original Yearning database.</li>\n<li>Execute the <strong>migrate</strong> binary file in the Yearning directory. Ensure this is done <strong>before</strong> starting Yearning!</li>\n<li>Start Yearning normally.</li>\n</ol>\n<p><strong>Since the process, database exclusion, and desensitization logic have changed to be data source-based, please modify the configuration at the data source post-update.</strong></p>\n<h3 id=\"_2022-05-27-yearning-3-0-0-rc13\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2022-05-27-yearning-3-0-0-rc13\"><span>2022-05-27 Yearning 3.0.0-RC13</span></a></h3>\n<ul>\n<li>Fixed SQL rollback panic under high concurrency.</li>\n<li>Addressed migration tool issues causing user permission exceptions when user groups are empty.</li>\n<li>Fixed errors resulting from incorrect secret keys.</li>\n<li>Resolved issues where the editor allowed selection of statements for testing during audit and order detection.</li>\n<li>Added refresh button to the audit page.</li>\n<li>Fixed form validation errors during order submissions.</li>\n<li>Optimized card-header style.</li>\n</ul>\n<h3 id=\"_2022-05-20-yearning-3-0-0-rc12\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2022-05-20-yearning-3-0-0-rc12\"><span>2022-05-20 Yearning 3.0.0-RC12</span></a></h3>\n<ul>\n<li>Corrected command prompt errors in startup parameters (—config corrected to -config).</li>\n<li>Fixed issue where the registration popup on login would not close post-registration.</li>\n<li>Fixed validation checks for DDL statements with empty string defaults.</li>\n<li>Resolved issues with varchar type field length checks based on byte length.</li>\n<li>Fixed problems where DML/DDL affect row count was not effective.</li>\n<li>Resolved issue of agreeing to audit SQL statements without prior checks.</li>\n<li>Addressed issues where data submission buttons were not disabled after SQL checks.</li>\n<li>Fixed connection interruption due to prolonged idle wait times.</li>\n</ul>\n<h3 id=\"_2022-05-11-yearning-3-0-0-rc11\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2022-05-11-yearning-3-0-0-rc11\"><span>2022-05-11 Yearning 3.0.0-RC11</span></a></h3>\n<ul>\n<li>Enhanced the display of the normal theme.</li>\n<li>Resolved anomalies in audit rules requiring table creation with fields.</li>\n<li>Fixed issue allowing system re-entry through back operation after logout.</li>\n<li>Resolved panic issues with the migration tool.</li>\n</ul>\n<h3 id=\"_2022-05-09-yearning-3-0-0-rc10\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2022-05-09-yearning-3-0-0-rc10\"><span>2022-05-09 Yearning 3.0.0-RC10</span></a></h3>\n<ul>\n<li>Added merge function for DDL audit alter statements.</li>\n<li>Introduced search function in order application selection box.</li>\n<li>Added theme change feature under Personal Settings in the top header.</li>\n<li>Fixed issue preventing users from returning to the query portal if a query order was ended early by the auditor.</li>\n</ul>\n<h3 id=\"_2022-05-07-yearning-3-0-0-rc9\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2022-05-07-yearning-3-0-0-rc9\"><span>2022-05-07 Yearning 3.0.0-RC9</span></a></h3>\n<ul>\n<li>Fixed failures caused by added spaces post-SQL beautification.</li>\n<li>Optimized related button text.</li>\n<li>Corrected display anomalies in resubmission and rollback statement submission buttons.</li>\n<li>Added loading indicator for data source test connections.</li>\n</ul>\n<h2 id=\"change-log\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#change-log\"><span>Change Log</span></a></h2>\n<h3 id=\"_2022-05-06-yearning-3-0-0-rc8\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2022-05-06-yearning-3-0-0-rc8\"><span>2022-05-06 Yearning 3.0.0-RC8</span></a></h3>\n<ul>\n<li>Fixed incorrect text prompts when deleting a data source.</li>\n<li>Added a confirmation prompt box for order approval.</li>\n<li>Resolved the issue where executing an empty SQL statement in an order caused a program crash.</li>\n<li>Fixed issues in the migration script that did not process query data source information.</li>\n<li>Introduced LDAP test user option, improving LDAP test result feedback.</li>\n<li>Added LDAP user attribute mapping, enabling LDAP fields to be mapped into Yearning user fields. This allows LDAP users to log in and automatically update their real names, departments, and emails.</li>\n<li>Added query history feature, allowing users to copy previously executed SQL statements within the current session.</li>\n<li>Added a role for data source leaders, who will act as query auditors.</li>\n<li>Changed login background video to prevent dizziness.</li>\n<li>Introduced a debounce mechanism to optimize order submission, checking, and login actions, preventing multiple submissions from rapid clicks.</li>\n</ul>\n<p>Yearning uses automatic table structure synchronization, so no manual updates are required. Simply <strong>stop the existing service, replace the installation package, and then restart</strong> to apply updates.</p>\n<blockquote>\n<p>In some specific upgrade situations (destructive changes), manual data synchronization is necessary. If the version update announcement doesn't mention destructive upgrades, you can ignore the following command:</p>\n</blockquote>\n<div class=\"language-shell line-numbers-mode\" data-ext=\"shell\" data-title=\"shell\"><button class=\"copy\" title=\"Copy code\" data-copied=\"Copied\"></button><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code><span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">./Yearning</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> migrate</span></span></code></pre>\n\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div></div></div><div class=\"hint-container warning\">\n<p class=\"hint-container-title\">Warning</p>\n<h4 id=\"upgrading-from-version-2-3-5-to-3-0-0\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#upgrading-from-version-2-3-5-to-3-0-0\"><span>Upgrading from Version 2.3.5 to 3.0.0</span></a></h4>\n<p><strong>Current RC version supports migration only from version 2.3.5</strong></p>\n<ol>\n<li>\n<p>Backup the original Yearning database.</p>\n</li>\n<li>\n<p>Execute the <strong>./migrate</strong> binary file in the Yearning directory. Ensure this is done <strong>before</strong> starting Yearning!</p>\n</li>\n<li>\n<p>Start Yearning normally.</p>\n</li>\n</ol>\n</div>\n<div class=\"hint-container caution\">\n<p class=\"hint-container-title\">Caution</p>\n<p>In some new versions, there may be additional changes. Please close and reopen the Yearning page to log in again after the update.\nSince processes, exclusion of databases, and desensitization logic have changed to be data source-based, modify configurations in the data sources after updating.</p>\n</div>\n</template>","contentStripped":"<h3 id=\"_2024-11-01-yearning-3-1-9\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2024-11-01-yearning-3-1-9\"><span>2024-11-01 Yearning 3.1.9</span></a></h3>\n<ul>\n<li>Improved the stream message format for the AI assistant.</li>\n<li>Fixed the issue where the list did not refresh when creating a data source.</li>\n<li>Resolved the problem of precision loss with bigint data type (#1104).</li>\n<li>Fixed the issue where executing SQL did not support SSL connections (#1120).</li>\n<li>Added DMLWhereExprValueIsNull audit parameter: Checks if the where condition value in DML statements is null.</li>\n<li>Introduced a new audit button (#1032).</li>\n</ul>\n<h3 id=\"_2024-07-27-yearning-3-1-8\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2024-07-27-yearning-3-1-8\"><span>2024-07-27 Yearning 3.1.8</span></a></h3>\n<ul>\n<li>Implemented audit button debounce to fix abnormal data issues caused by multiple clicks.</li>\n<li>Added smart assistant functionality.</li>\n<li>Introduced SQL statement AI optimization and AI text-generated SQL functions.</li>\n<li>Enabled viewing of table structures in the query menu (#1057).</li>\n<li>Added MFA authentication (sponsored version).</li>\n<li>Fixed the problem where datetime field type detection might occasionally display errors (#1039).</li>\n<li>Resolved the issue where query audits could be submitted multiple times (#1024).</li>\n<li>Fixed the abnormal display of default audit person restrictions (#991).</li>\n<li>Updated dependencies and resolved security vulnerabilities.</li>\n<li>Updated Docker file image to fix issues with changing language settings via environment variables.</li>\n</ul>\n<h3 id=\"_2024-01-02-yearning-3-1-7\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2024-01-02-yearning-3-1-7\"><span>2024-01-02 Yearning 3.1.7</span></a></h3>\n<ul>\n<li>Fixed the error that occurred when the process status was abnormal after a flow change, causing information to not display.</li>\n<li>Added new search conditions for termination, cancellation, and pending execution in order search.</li>\n</ul>\n<h3 id=\"_2023-09-08-yearning-3-1-6-3\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2023-09-08-yearning-3-1-6-3\"><span>2023-09-08 Yearning 3.1.6.3</span></a></h3>\n<ul>\n<li>Fix: Closed #901 by resolving the issue where querying a non-existent table name or executing a DML caused the query page to freeze.</li>\n<li>Various optimizations.</li>\n</ul>\n<h3 id=\"_2023-08-10-yearning-3-1-6-2\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2023-08-10-yearning-3-1-6-2\"><span>2023-08-10 Yearning 3.1.6.2</span></a></h3>\n<ul>\n<li>Feature: Closed #832, allowing for custom audit rules on a per data source basis.</li>\n<li>Feature: Multi-language support; specify front and back-end languages via config.toml, supporting Chinese/English.</li>\n<li>Fix: Closed #848, resolving the issue where the loading indicator was not shown during query waits.</li>\n<li>Optimization: Closed #840, improved daily order number display issues on the homepage.</li>\n<li>Optimization: Closed #790, added data source column display on the order audit page.</li>\n<li>Optimization: Closed #703, supported changing execution time/immediate execution/termination of scheduled tasks.</li>\n<li>Optimization: Changed the order list sorting rule to be based on audit status and chronological order.</li>\n<li>Optimization: Supported transaction mode execution for DML data; activate this option in the audit rules by searching for DMLTransaction.</li>\n<li>Optimization: Closed #795, query keyword reminders (table names, field names) are restricted to the current database. When a database is selected, its table and field names are obtained.</li>\n<li>Optimization: Query results now support copying cell content upon click.</li>\n<li>Optimization: Specified domain address changes are now made through the settings page instead of via the -s flag; DingTalk card supports URL jumps.</li>\n<li>Various other optimizations.</li>\n</ul>\n<h3 id=\"_2023-07-04-yearning-3-1-5\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2023-07-04-yearning-3-1-5\"><span>2023-07-04 Yearning 3.1.5</span></a></h3>\n<ul>\n<li>Optimized layout on the audit detail page.</li>\n<li>Improved layout of audit buttons #829 #825 #802.</li>\n<li>Fixed exceptions in audit query time range condition formatting.</li>\n<li>Resolved errors when adding datetime fields with default values of 0000-00-00 00:00:00 #823.</li>\n<li>Corrected the issue where queries could still be audited after the person responsible had been changed.</li>\n</ul>\n<h3 id=\"_2023-04-24-yearning-3-1-4\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2023-04-24-yearning-3-1-4\"><span>2023-04-24 Yearning 3.1.4</span></a></h3>\n<ul>\n<li>Transitioned from polling to WebSocket for real-time data retrieval in orders/query lists.</li>\n<li>Order/query details are displayed using a card drawer style.</li>\n<li>Fixed the issue where executing query statements with too many columns in Google Chrome would cause the browser to enlarge excessively #789.</li>\n<li>Added ARMv64 support.</li>\n</ul>\n<h3 id=\"_2023-03-09-yearning-3-1-3\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2023-03-09-yearning-3-1-3\"><span>2023-03-09 Yearning 3.1.3</span></a></h3>\n<ul>\n<li>Resolved issues with gh-ost execution.</li>\n<li>Fixed order list refresh anomalies.</li>\n<li>Addressed the problem where execution information could not be displayed when DML statements were executed without backup.</li>\n</ul>\n<h3 id=\"_2023-02-10-yearning-3-1-2-2\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2023-02-10-yearning-3-1-2-2\"><span>2023-02-10 Yearning 3.1.2.2</span></a></h3>\n<ul>\n<li>Fixed the Firefox browser header style blocking issue #637.</li>\n<li>Resolved insert statement audit anomalies #760 #759 #755.</li>\n</ul>\n<h3 id=\"_2023-02-01-yearning-3-1-2-1\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2023-02-01-yearning-3-1-2-1\"><span>2023-02-01 Yearning 3.1.2.1</span></a></h3>\n<ul>\n<li>Corrected the order anomaly issue post-query audit order submission.</li>\n<li>Resolved the problem where the bulletin board data could not be saved.</li>\n<li>Fixed the display error in password creation validation documentation.</li>\n<li>Addressed enumeration audit anomalies.</li>\n<li>Rectified syntax detection issues when the default value of timestamp fields is a string.</li>\n<li>Resolved audit anomalies in insert into statements where column and value list numbers do not match.</li>\n<li>Added support for drop table if exists statements.</li>\n<li>Supported SSL connection for data sources.</li>\n</ul>\n<h3 id=\"_2022-11-14-yearning-3-1-1-1\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2022-11-14-yearning-3-1-1-1\"><span>2022-11-14 Yearning 3.1.1.1</span></a></h3>\n<ul>\n<li>Resolved the issue where rollback statements executed in ascending order, causing dependency errors (changed to descending order).</li>\n<li>Adjusted debounce logic to prevent duplicate submissions.</li>\n<li>Fixed the issue where querying with an order time didn't work.</li>\n<li>Corrected anomalies in rollback statements when changing table character sets.</li>\n<li>Fixed the problem allowing submission of empty SQL statements.</li>\n<li>Implemented front-end caching for list pages.</li>\n<li>Resolved audit anomalies with enumerations.</li>\n<li>Fixed the issue where execution time was not displayed.</li>\n<li>Corrected errors in creating separate index statements for table rollback statements.</li>\n<li>Fixed the admin authorization statement error during installation initialization.</li>\n</ul>\n<h3 id=\"_2022-09-15-yearning-3-1-0\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2022-09-15-yearning-3-1-0\"><span>2022-09-15 Yearning 3.1.0</span></a></h3>\n<ul>\n<li>Resolved the issue of SQL connections not being released after detection/execution.</li>\n<li>Fixed the issue where auditors couldn't perform audits without data source permissions.</li>\n</ul>\n<h3 id=\"_2022-09-01-yearning-3-0-9\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2022-09-01-yearning-3-0-9\"><span>2022-09-01 Yearning 3.0.9</span></a></h3>\n<ul>\n<li>Optimized the audit list to prevent freezing with large batches of SQL.</li>\n<li>Enhanced the layout for the white theme.</li>\n<li>Corrected email sending issues for SSL non-465 ports.</li>\n</ul>\n<h3 id=\"_2022-08-18-yearning-3-0-8\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2022-08-18-yearning-3-0-8\"><span>2022-08-18 Yearning 3.0.8</span></a></h3>\n<ul>\n<li>Added i18n English support (currently for front-end content only).</li>\n<li>Fixed the narrative and title errors in push notifications (affecting versions &gt;= 3.0.5).</li>\n<li>Resolved issues with switching databases when special symbols are included in the database name during queries (#661).</li>\n<li>Enhanced migration script experience (for migrations from version 2.3.5 to 3.x).</li>\n</ul>\n<h3 id=\"_2022-08-18-yearning-3-0-7\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2022-08-18-yearning-3-0-7\"><span>2022-08-18 Yearning 3.0.7</span></a></h3>\n<ul>\n<li>Resolved issues with test message not sending.</li>\n<li>Fixed console errors in order time field queries.</li>\n<li>Addressed issues of duplicate order submissions.</li>\n<li>Corrected disordered column sequences in exported XLS queries.</li>\n<li>Improved the visualization of query results.</li>\n<li>Enhanced style for order detail progress information.</li>\n<li>Improved container deployment with custom secret key support.</li>\n<li>Optimized OIDC login logic.</li>\n</ul>\n<h3 id=\"_2022-08-11-yearning-3-0-6\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2022-08-11-yearning-3-0-6\"><span>2022-08-11 Yearning 3.0.6</span></a></h3>\n<ul>\n<li>Enhanced WebSocket query reconnection logic.</li>\n<li>Fixed tab display anomalies in query results.</li>\n<li>Solved message format issues in version 3.0.5.</li>\n<li>Resolved issues with certain query formats causing sensitive data exposure.</li>\n</ul>\n<h3 id=\"_2022-08-06-yearning-3-0-5\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2022-08-06-yearning-3-0-5\"><span>2022-08-06 Yearning 3.0.5</span></a></h3>\n<ul>\n<li>Fixed freezing issues when more than 10 DDL statements were submitted.</li>\n<li>Resolved length error issues when checking enum types.</li>\n<li>Addressed security issues in order/query during testing/query operations.</li>\n<li>Introduced query abbreviation display.</li>\n<li>Optimized query logic for increased connection utilization efficiency.</li>\n<li>Fixed repeated prompts in multi-window auto-suggestion scenarios.</li>\n</ul>\n<h3 id=\"_2022-07-23-yearning-3-0-4\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2022-07-23-yearning-3-0-4\"><span>2022-07-23 Yearning 3.0.4</span></a></h3>\n<ul>\n<li>Fixed issues preventing order revoking.</li>\n<li>Corrected homepage narrative errors.</li>\n<li>Resolved anomalies in order application searches.</li>\n<li>Fixed execution failure document anomalies.</li>\n<li>Addressed issues preventing rollback statement generation for orders.</li>\n<li>Corrected initialization issues with missing table structures.</li>\n</ul>\n<h3 id=\"_2022-07-19-yearning-3-0-3\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2022-07-19-yearning-3-0-3\"><span>2022-07-19 Yearning 3.0.3</span></a></h3>\n<ul>\n<li>Resolved issues with unusable data clearance.</li>\n<li>Fixed insufficient field length preventing order submission.</li>\n<li>Addressed browser SessionStorage quota exceedance issues due to large query suggestions.</li>\n<li>Fixed issues allowing submission of rollback statements even when empty.</li>\n<li>Resolved AUTO_INCREMENT DDL audit errors.</li>\n<li>Solved user addition issues.</li>\n<li>Fixed database name expansion issues when switching data sources with identical names.</li>\n<li>Corrected keyword check anomalies.</li>\n<li>Resolved panic anomalies in Docker installations (#610).</li>\n<li>Fixed issues with inserting millisecond-accurate datetime(3) values (#616).</li>\n<li>Resolved issues preventing the dropping of composite indexes in SQL checks; PK AUTOINCREMENT columns must not be deleted (#612).</li>\n<li>Added support for DRDS 2.0.</li>\n<li>Included order description display in audit details.</li>\n<li>Added detection/beautification button prompts.</li>\n<li>Upgraded gorm to version v2.</li>\n<li>Optimized code organization and upgraded to Go 1.18 for the development environment.</li>\n</ul>\n<h3 id=\"_2022-06-20-yearning-3-0-1\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2022-06-20-yearning-3-0-1\"><span>2022-06-20 Yearning 3.0.1</span></a></h3>\n<ul>\n<li>Added functionality for users to revoke orders.</li>\n<li>Enabled switching of query data sources.</li>\n<li>Implemented session end function for users in queries.</li>\n<li>Optimized query audit logic; orders requiring query audits cannot switch data sources.</li>\n<li>Fixed issues preventing modification of data source names.</li>\n<li>Enhanced data source query logic.</li>\n<li>Introduced DDLAllowMultiAlter audit rule, enabling multiple alter statements in a single DDL order.</li>\n<li>Fixed issues where editing a process replaced old processes when creating a new one.</li>\n</ul>\n<h3 id=\"_2022-06-02-yearning-3-0-0-ga\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2022-06-02-yearning-3-0-0-ga\"><span>2022-06-02 Yearning 3.0.0-GA</span></a></h3>\n<p><strong>Design</strong></p>\n<ol>\n<li>Redesigned the front-end interface using vite+vue3.2 development model. The default theme is dark, with an option for theme switching, which can be changed in personal settings.</li>\n<li>Unified layout and design language.</li>\n<li>Optimized order application layout to use a card style with full-text search support.</li>\n<li>Completely redesigned audit/query details page.</li>\n</ol>\n<p><strong>Review Engine</strong></p>\n<ol>\n<li>Completely restructured review engine with added hit cache, significantly improving performance in auditing batch SQLs.</li>\n<li>Optimized related code to reduce redundant logic.</li>\n<li>Supports execution of gh/osc scripts.</li>\n<li>Supports context-aware audits for SQL statements.</li>\n<li>Upgraded AST syntax tree to the latest version.</li>\n</ol>\n<p><strong>Query</strong></p>\n<ol>\n<li>A brand-new query interface, supporting shortcuts for clipboard access and database/table searches.</li>\n<li>Allows querying table data by right-clicking on the table name.</li>\n<li>The editor supports running selected or multiple queries simultaneously and via shortcuts.</li>\n<li>Changed export file format to XLS.</li>\n<li>Converted query connections to WebSocket, eliminating timeouts during prolonged SQL execution.</li>\n<li>Compressed query data using msgpack format to significantly reduce size.</li>\n<li>The query table supports resizing and width adjustments via drag-and-drop.</li>\n<li>Auto-suggestions now associate to the field level.</li>\n<li>Drastically improved performance for desensitized queries.</li>\n<li>Fixed the issue where query state did not update in time if query duration exceeded limits.</li>\n<li>Optimized desensitization logic to be data source-based rather than global.</li>\n<li>Added query history records, allowing one-click copy of SQL statements executed during the current query session.</li>\n</ol>\n<p><strong>Audit</strong></p>\n<ol>\n<li>Users no longer need to choose a superior auditor; the system automatically sends it to the flow node's auditor. If multiple auditors exist, they all have audit rights, but only one can change the state.</li>\n<li>Added exit/refresh confirmation prompts on the order submission page.</li>\n<li>Introduced a comment function for SQL orders.</li>\n<li>OSC progress now displays complete execution information instead of just a percentage, making troubleshooting easier.</li>\n</ol>\n<p><strong>Others</strong></p>\n<ol>\n<li>Optimized exclusion of databases to be based on data sources instead of global.</li>\n<li>Decoupled processes from environments; processes can bind to one or more data sources.</li>\n<li>Optimized scheduled execution to ensure that initialization only occurs before actual execution when wait time exceeds MySQL's max connection timeout.</li>\n<li>Added a user watermark feature.</li>\n<li>Introduced a data source leader, who will also serve as the query auditor.</li>\n<li>Added an LDAP test user option, optimizing LDAP test results logic.</li>\n<li>Added LDAP user attribute mapping, enabling mapped fields from LDAP into specified Yearning user fields. This allows automatic updating of real name, department, and email upon LDAP user login.</li>\n<li>Added a debounce mechanism to optimize order submission, checking, and login actions to prevent multiple submissions from rapid clicks.</li>\n</ol>\n<h4 id=\"update-from-version-2-3-5-to-3-0\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#update-from-version-2-3-5-to-3-0\"><span>Update from Version 2.3.5 to 3.0</span></a></h4>\n<p><strong>Current RC version only supports updates from 2.3.5</strong></p>\n<ol>\n<li>Backup the original Yearning database.</li>\n<li>Execute the <strong>migrate</strong> binary file in the Yearning directory. Ensure this is done <strong>before</strong> starting Yearning!</li>\n<li>Start Yearning normally.</li>\n</ol>\n<p><strong>Since the process, database exclusion, and desensitization logic have changed to be data source-based, please modify the configuration at the data source post-update.</strong></p>\n<h3 id=\"_2022-05-27-yearning-3-0-0-rc13\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2022-05-27-yearning-3-0-0-rc13\"><span>2022-05-27 Yearning 3.0.0-RC13</span></a></h3>\n<ul>\n<li>Fixed SQL rollback panic under high concurrency.</li>\n<li>Addressed migration tool issues causing user permission exceptions when user groups are empty.</li>\n<li>Fixed errors resulting from incorrect secret keys.</li>\n<li>Resolved issues where the editor allowed selection of statements for testing during audit and order detection.</li>\n<li>Added refresh button to the audit page.</li>\n<li>Fixed form validation errors during order submissions.</li>\n<li>Optimized card-header style.</li>\n</ul>\n<h3 id=\"_2022-05-20-yearning-3-0-0-rc12\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2022-05-20-yearning-3-0-0-rc12\"><span>2022-05-20 Yearning 3.0.0-RC12</span></a></h3>\n<ul>\n<li>Corrected command prompt errors in startup parameters (—config corrected to -config).</li>\n<li>Fixed issue where the registration popup on login would not close post-registration.</li>\n<li>Fixed validation checks for DDL statements with empty string defaults.</li>\n<li>Resolved issues with varchar type field length checks based on byte length.</li>\n<li>Fixed problems where DML/DDL affect row count was not effective.</li>\n<li>Resolved issue of agreeing to audit SQL statements without prior checks.</li>\n<li>Addressed issues where data submission buttons were not disabled after SQL checks.</li>\n<li>Fixed connection interruption due to prolonged idle wait times.</li>\n</ul>\n<h3 id=\"_2022-05-11-yearning-3-0-0-rc11\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2022-05-11-yearning-3-0-0-rc11\"><span>2022-05-11 Yearning 3.0.0-RC11</span></a></h3>\n<ul>\n<li>Enhanced the display of the normal theme.</li>\n<li>Resolved anomalies in audit rules requiring table creation with fields.</li>\n<li>Fixed issue allowing system re-entry through back operation after logout.</li>\n<li>Resolved panic issues with the migration tool.</li>\n</ul>\n<h3 id=\"_2022-05-09-yearning-3-0-0-rc10\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2022-05-09-yearning-3-0-0-rc10\"><span>2022-05-09 Yearning 3.0.0-RC10</span></a></h3>\n<ul>\n<li>Added merge function for DDL audit alter statements.</li>\n<li>Introduced search function in order application selection box.</li>\n<li>Added theme change feature under Personal Settings in the top header.</li>\n<li>Fixed issue preventing users from returning to the query portal if a query order was ended early by the auditor.</li>\n</ul>\n<h3 id=\"_2022-05-07-yearning-3-0-0-rc9\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2022-05-07-yearning-3-0-0-rc9\"><span>2022-05-07 Yearning 3.0.0-RC9</span></a></h3>\n<ul>\n<li>Fixed failures caused by added spaces post-SQL beautification.</li>\n<li>Optimized related button text.</li>\n<li>Corrected display anomalies in resubmission and rollback statement submission buttons.</li>\n<li>Added loading indicator for data source test connections.</li>\n</ul>\n<h2 id=\"change-log\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#change-log\"><span>Change Log</span></a></h2>\n<h3 id=\"_2022-05-06-yearning-3-0-0-rc8\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2022-05-06-yearning-3-0-0-rc8\"><span>2022-05-06 Yearning 3.0.0-RC8</span></a></h3>\n<ul>\n<li>Fixed incorrect text prompts when deleting a data source.</li>\n<li>Added a confirmation prompt box for order approval.</li>\n<li>Resolved the issue where executing an empty SQL statement in an order caused a program crash.</li>\n<li>Fixed issues in the migration script that did not process query data source information.</li>\n<li>Introduced LDAP test user option, improving LDAP test result feedback.</li>\n<li>Added LDAP user attribute mapping, enabling LDAP fields to be mapped into Yearning user fields. This allows LDAP users to log in and automatically update their real names, departments, and emails.</li>\n<li>Added query history feature, allowing users to copy previously executed SQL statements within the current session.</li>\n<li>Added a role for data source leaders, who will act as query auditors.</li>\n<li>Changed login background video to prevent dizziness.</li>\n<li>Introduced a debounce mechanism to optimize order submission, checking, and login actions, preventing multiple submissions from rapid clicks.</li>\n</ul>\n<p>Yearning uses automatic table structure synchronization, so no manual updates are required. Simply <strong>stop the existing service, replace the installation package, and then restart</strong> to apply updates.</p>\n<blockquote>\n<p>In some specific upgrade situations (destructive changes), manual data synchronization is necessary. If the version update announcement doesn't mention destructive upgrades, you can ignore the following command:</p>\n</blockquote>\n<div class=\"language-shell line-numbers-mode\" data-ext=\"shell\" data-title=\"shell\"><button class=\"copy\" title=\"Copy code\" data-copied=\"Copied\"></button><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code><span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">./Yearning</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> migrate</span></span></code></pre>\n\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div></div></div><div class=\"hint-container warning\">\n<p class=\"hint-container-title\">Warning</p>\n<h4 id=\"upgrading-from-version-2-3-5-to-3-0-0\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#upgrading-from-version-2-3-5-to-3-0-0\"><span>Upgrading from Version 2.3.5 to 3.0.0</span></a></h4>\n<p><strong>Current RC version supports migration only from version 2.3.5</strong></p>\n<ol>\n<li>\n<p>Backup the original Yearning database.</p>\n</li>\n<li>\n<p>Execute the <strong>./migrate</strong> binary file in the Yearning directory. Ensure this is done <strong>before</strong> starting Yearning!</p>\n</li>\n<li>\n<p>Start Yearning normally.</p>\n</li>\n</ol>\n</div>\n<div class=\"hint-container caution\">\n<p class=\"hint-container-title\">Caution</p>\n<p>In some new versions, there may be additional changes. Please close and reopen the Yearning page to log in again after the update.\nSince processes, exclusion of databases, and desensitization logic have changed to be data source-based, modify configurations in the data sources after updating.</p>\n</div>\n","tagOpen":"<template>","tagClose":"</template>"},"script":null,"scriptSetup":null,"scripts":[],"styles":[],"customBlocks":[]},"content":"### 2024-11-01 Yearning 3.1.9\n- Improved the stream message format for the AI assistant.\n- Fixed the issue where the list did not refresh when creating a data source.\n- Resolved the problem of precision loss with bigint data type (#1104).\n- Fixed the issue where executing SQL did not support SSL connections (#1120).\n- Added DMLWhereExprValueIsNull audit parameter: Checks if the where condition value in DML statements is null.\n- Introduced a new audit button (#1032).\n\n### 2024-07-27 Yearning 3.1.8\n- Implemented audit button debounce to fix abnormal data issues caused by multiple clicks.\n- Added smart assistant functionality.\n- Introduced SQL statement AI optimization and AI text-generated SQL functions.\n- Enabled viewing of table structures in the query menu (#1057).\n- Added MFA authentication (sponsored version).\n- Fixed the problem where datetime field type detection might occasionally display errors (#1039).\n- Resolved the issue where query audits could be submitted multiple times (#1024).\n- Fixed the abnormal display of default audit person restrictions (#991).\n- Updated dependencies and resolved security vulnerabilities.\n- Updated Docker file image to fix issues with changing language settings via environment variables.\n\n### 2024-01-02 Yearning 3.1.7\n- Fixed the error that occurred when the process status was abnormal after a flow change, causing information to not display.\n- Added new search conditions for termination, cancellation, and pending execution in order search.\n\n### 2023-09-08 Yearning 3.1.6.3\n- Fix: Closed #901 by resolving the issue where querying a non-existent table name or executing a DML caused the query page to freeze.\n- Various optimizations.\n\n### 2023-08-10 Yearning 3.1.6.2\n- Feature: Closed #832, allowing for custom audit rules on a per data source basis.\n- Feature: Multi-language support; specify front and back-end languages via config.toml, supporting Chinese/English.\n- Fix: Closed #848, resolving the issue where the loading indicator was not shown during query waits.\n- Optimization: Closed #840, improved daily order number display issues on the homepage.\n- Optimization: Closed #790, added data source column display on the order audit page.\n- Optimization: Closed #703, supported changing execution time/immediate execution/termination of scheduled tasks.\n- Optimization: Changed the order list sorting rule to be based on audit status and chronological order.\n- Optimization: Supported transaction mode execution for DML data; activate this option in the audit rules by searching for DMLTransaction.\n- Optimization: Closed #795, query keyword reminders (table names, field names) are restricted to the current database. When a database is selected, its table and field names are obtained.\n- Optimization: Query results now support copying cell content upon click.\n- Optimization: Specified domain address changes are now made through the settings page instead of via the -s flag; DingTalk card supports URL jumps.\n- Various other optimizations.\n\n### 2023-07-04 Yearning 3.1.5\n- Optimized layout on the audit detail page.\n- Improved layout of audit buttons #829 #825 #802.\n- Fixed exceptions in audit query time range condition formatting.\n- Resolved errors when adding datetime fields with default values of 0000-00-00 00:00:00 #823.\n- Corrected the issue where queries could still be audited after the person responsible had been changed.\n\n### 2023-04-24 Yearning 3.1.4\n- Transitioned from polling to WebSocket for real-time data retrieval in orders/query lists.\n- Order/query details are displayed using a card drawer style.\n- Fixed the issue where executing query statements with too many columns in Google Chrome would cause the browser to enlarge excessively #789.\n- Added ARMv64 support.\n\n### 2023-03-09 Yearning 3.1.3\n- Resolved issues with gh-ost execution.\n- Fixed order list refresh anomalies.\n- Addressed the problem where execution information could not be displayed when DML statements were executed without backup.\n\n### 2023-02-10 Yearning 3.1.2.2\n- Fixed the Firefox browser header style blocking issue #637.\n- Resolved insert statement audit anomalies #760 #759 #755.\n\n### 2023-02-01 Yearning 3.1.2.1\n- Corrected the order anomaly issue post-query audit order submission.\n- Resolved the problem where the bulletin board data could not be saved.\n- Fixed the display error in password creation validation documentation.\n- Addressed enumeration audit anomalies.\n- Rectified syntax detection issues when the default value of timestamp fields is a string.\n- Resolved audit anomalies in insert into statements where column and value list numbers do not match.\n- Added support for drop table if exists statements.\n- Supported SSL connection for data sources.\n\n### 2022-11-14 Yearning 3.1.1.1\n- Resolved the issue where rollback statements executed in ascending order, causing dependency errors (changed to descending order).\n- Adjusted debounce logic to prevent duplicate submissions.\n- Fixed the issue where querying with an order time didn't work.\n- Corrected anomalies in rollback statements when changing table character sets.\n- Fixed the problem allowing submission of empty SQL statements.\n- Implemented front-end caching for list pages.\n- Resolved audit anomalies with enumerations.\n- Fixed the issue where execution time was not displayed.\n- Corrected errors in creating separate index statements for table rollback statements.\n- Fixed the admin authorization statement error during installation initialization.\n\n### 2022-09-15 Yearning 3.1.0\n- Resolved the issue of SQL connections not being released after detection/execution.\n- Fixed the issue where auditors couldn't perform audits without data source permissions.\n\n### 2022-09-01 Yearning 3.0.9\n- Optimized the audit list to prevent freezing with large batches of SQL.\n- Enhanced the layout for the white theme.\n- Corrected email sending issues for SSL non-465 ports.\n\n### 2022-08-18 Yearning 3.0.8\n- Added i18n English support (currently for front-end content only).\n- Fixed the narrative and title errors in push notifications (affecting versions >= 3.0.5).\n- Resolved issues with switching databases when special symbols are included in the database name during queries (#661).\n- Enhanced migration script experience (for migrations from version 2.3.5 to 3.x).\n\n### 2022-08-18 Yearning 3.0.7\n- Resolved issues with test message not sending.\n- Fixed console errors in order time field queries.\n- Addressed issues of duplicate order submissions.\n- Corrected disordered column sequences in exported XLS queries.\n- Improved the visualization of query results.\n- Enhanced style for order detail progress information.\n- Improved container deployment with custom secret key support.\n- Optimized OIDC login logic.\n\n### 2022-08-11 Yearning 3.0.6\n- Enhanced WebSocket query reconnection logic.\n- Fixed tab display anomalies in query results.\n- Solved message format issues in version 3.0.5.\n- Resolved issues with certain query formats causing sensitive data exposure.\n\n### 2022-08-06 Yearning 3.0.5\n- Fixed freezing issues when more than 10 DDL statements were submitted.\n- Resolved length error issues when checking enum types.\n- Addressed security issues in order/query during testing/query operations.\n- Introduced query abbreviation display.\n- Optimized query logic for increased connection utilization efficiency.\n- Fixed repeated prompts in multi-window auto-suggestion scenarios.\n\n### 2022-07-23 Yearning 3.0.4\n- Fixed issues preventing order revoking.\n- Corrected homepage narrative errors.\n- Resolved anomalies in order application searches.\n- Fixed execution failure document anomalies.\n- Addressed issues preventing rollback statement generation for orders.\n- Corrected initialization issues with missing table structures.\n\n### 2022-07-19 Yearning 3.0.3\n- Resolved issues with unusable data clearance.\n- Fixed insufficient field length preventing order submission.\n- Addressed browser SessionStorage quota exceedance issues due to large query suggestions.\n- Fixed issues allowing submission of rollback statements even when empty.\n- Resolved AUTO_INCREMENT DDL audit errors.\n- Solved user addition issues.\n- Fixed database name expansion issues when switching data sources with identical names.\n- Corrected keyword check anomalies.\n- Resolved panic anomalies in Docker installations (#610).\n- Fixed issues with inserting millisecond-accurate datetime(3) values (#616).\n- Resolved issues preventing the dropping of composite indexes in SQL checks; PK AUTOINCREMENT columns must not be deleted (#612).\n- Added support for DRDS 2.0.\n- Included order description display in audit details.\n- Added detection/beautification button prompts.\n- Upgraded gorm to version v2.\n- Optimized code organization and upgraded to Go 1.18 for the development environment.\n\n### 2022-06-20 Yearning 3.0.1\n- Added functionality for users to revoke orders.\n- Enabled switching of query data sources.\n- Implemented session end function for users in queries.\n- Optimized query audit logic; orders requiring query audits cannot switch data sources.\n- Fixed issues preventing modification of data source names.\n- Enhanced data source query logic.\n- Introduced DDLAllowMultiAlter audit rule, enabling multiple alter statements in a single DDL order.\n- Fixed issues where editing a process replaced old processes when creating a new one. \n\n### 2022-06-02 Yearning 3.0.0-GA\n\n**Design**\n1. Redesigned the front-end interface using vite+vue3.2 development model. The default theme is dark, with an option for theme switching, which can be changed in personal settings.\n2. Unified layout and design language.\n3. Optimized order application layout to use a card style with full-text search support.\n4. Completely redesigned audit/query details page.\n\n**Review Engine**\n1. Completely restructured review engine with added hit cache, significantly improving performance in auditing batch SQLs.\n2. Optimized related code to reduce redundant logic.\n3. Supports execution of gh/osc scripts.\n4. Supports context-aware audits for SQL statements.\n5. Upgraded AST syntax tree to the latest version.\n\n**Query**\n1. A brand-new query interface, supporting shortcuts for clipboard access and database/table searches.\n2. Allows querying table data by right-clicking on the table name.\n3. The editor supports running selected or multiple queries simultaneously and via shortcuts.\n4. Changed export file format to XLS.\n5. Converted query connections to WebSocket, eliminating timeouts during prolonged SQL execution.\n6. Compressed query data using msgpack format to significantly reduce size.\n7. The query table supports resizing and width adjustments via drag-and-drop.\n8. Auto-suggestions now associate to the field level.\n9. Drastically improved performance for desensitized queries.\n10. Fixed the issue where query state did not update in time if query duration exceeded limits.\n12. Optimized desensitization logic to be data source-based rather than global.\n13. Added query history records, allowing one-click copy of SQL statements executed during the current query session.\n\n**Audit**\n1. Users no longer need to choose a superior auditor; the system automatically sends it to the flow node's auditor. If multiple auditors exist, they all have audit rights, but only one can change the state.\n2. Added exit/refresh confirmation prompts on the order submission page.\n3. Introduced a comment function for SQL orders.\n4. OSC progress now displays complete execution information instead of just a percentage, making troubleshooting easier.\n\n**Others**\n1. Optimized exclusion of databases to be based on data sources instead of global.\n2. Decoupled processes from environments; processes can bind to one or more data sources.\n3. Optimized scheduled execution to ensure that initialization only occurs before actual execution when wait time exceeds MySQL's max connection timeout.\n4. Added a user watermark feature.\n5. Introduced a data source leader, who will also serve as the query auditor.\n6. Added an LDAP test user option, optimizing LDAP test results logic.\n7. Added LDAP user attribute mapping, enabling mapped fields from LDAP into specified Yearning user fields. This allows automatic updating of real name, department, and email upon LDAP user login.\n8. Added a debounce mechanism to optimize order submission, checking, and login actions to prevent multiple submissions from rapid clicks.\n\n#### Update from Version 2.3.5 to 3.0\n\n**Current RC version only supports updates from 2.3.5**\n1. Backup the original Yearning database.\n2. Execute the **migrate** binary file in the Yearning directory. Ensure this is done **before** starting Yearning!\n3. Start Yearning normally.\n\n**Since the process, database exclusion, and desensitization logic have changed to be data source-based, please modify the configuration at the data source post-update.**\n\n### 2022-05-27 Yearning 3.0.0-RC13\n- Fixed SQL rollback panic under high concurrency.\n- Addressed migration tool issues causing user permission exceptions when user groups are empty.\n- Fixed errors resulting from incorrect secret keys.\n- Resolved issues where the editor allowed selection of statements for testing during audit and order detection.\n- Added refresh button to the audit page.\n- Fixed form validation errors during order submissions.\n- Optimized card-header style.\n\n### 2022-05-20 Yearning 3.0.0-RC12\n- Corrected command prompt errors in startup parameters (—config corrected to -config).\n- Fixed issue where the registration popup on login would not close post-registration.\n- Fixed validation checks for DDL statements with empty string defaults.\n- Resolved issues with varchar type field length checks based on byte length.\n- Fixed problems where DML/DDL affect row count was not effective.\n- Resolved issue of agreeing to audit SQL statements without prior checks.\n- Addressed issues where data submission buttons were not disabled after SQL checks.\n- Fixed connection interruption due to prolonged idle wait times.\n\n### 2022-05-11 Yearning 3.0.0-RC11\n- Enhanced the display of the normal theme.\n- Resolved anomalies in audit rules requiring table creation with fields.\n- Fixed issue allowing system re-entry through back operation after logout.\n- Resolved panic issues with the migration tool.\n\n### 2022-05-09 Yearning 3.0.0-RC10\n- Added merge function for DDL audit alter statements.\n- Introduced search function in order application selection box.\n- Added theme change feature under Personal Settings in the top header.\n- Fixed issue preventing users from returning to the query portal if a query order was ended early by the auditor.\n\n### 2022-05-07 Yearning 3.0.0-RC9\n- Fixed failures caused by added spaces post-SQL beautification.\n- Optimized related button text.\n- Corrected display anomalies in resubmission and rollback statement submission buttons.\n- Added loading indicator for data source test connections.\n  \n## Change Log\n\n### 2022-05-06 Yearning 3.0.0-RC8\n- Fixed incorrect text prompts when deleting a data source.\n- Added a confirmation prompt box for order approval.\n- Resolved the issue where executing an empty SQL statement in an order caused a program crash.\n- Fixed issues in the migration script that did not process query data source information.\n- Introduced LDAP test user option, improving LDAP test result feedback.\n- Added LDAP user attribute mapping, enabling LDAP fields to be mapped into Yearning user fields. This allows LDAP users to log in and automatically update their real names, departments, and emails.\n- Added query history feature, allowing users to copy previously executed SQL statements within the current session.\n- Added a role for data source leaders, who will act as query auditors.\n- Changed login background video to prevent dizziness.\n- Introduced a debounce mechanism to optimize order submission, checking, and login actions, preventing multiple submissions from rapid clicks.\n\nYearning uses automatic table structure synchronization, so no manual updates are required. Simply **stop the existing service, replace the installation package, and then restart** to apply updates.\n\n> In some specific upgrade situations (destructive changes), manual data synchronization is necessary. If the version update announcement doesn't mention destructive upgrades, you can ignore the following command:\n\n```shell\n./Yearning migrate\n```\n\n::: warning\n#### Upgrading from Version 2.3.5 to 3.0.0\n\n**Current RC version supports migration only from version 2.3.5**\n\n1. Backup the original Yearning database.\n\n2. Execute the **./migrate** binary file in the Yearning directory. Ensure this is done **before** starting Yearning!\n\n3. Start Yearning normally.\n:::\n\n::: danger\nIn some new versions, there may be additional changes. Please close and reopen the Yearning page to log in again after the update.\nSince processes, exclusion of databases, and desensitization logic have changed to be data source-based, modify configurations in the data sources after updating.\n:::","excerpt":"","tasklists":0,"title":"","headers":[{"level":3,"title":"2024-11-01 Yearning 3.1.9","slug":"_2024-11-01-yearning-3-1-9","link":"#_2024-11-01-yearning-3-1-9","children":[]},{"level":3,"title":"2024-07-27 Yearning 3.1.8","slug":"_2024-07-27-yearning-3-1-8","link":"#_2024-07-27-yearning-3-1-8","children":[]},{"level":3,"title":"2024-01-02 Yearning 3.1.7","slug":"_2024-01-02-yearning-3-1-7","link":"#_2024-01-02-yearning-3-1-7","children":[]},{"level":3,"title":"2023-09-08 Yearning 3.1.6.3","slug":"_2023-09-08-yearning-3-1-6-3","link":"#_2023-09-08-yearning-3-1-6-3","children":[]},{"level":3,"title":"2023-08-10 Yearning 3.1.6.2","slug":"_2023-08-10-yearning-3-1-6-2","link":"#_2023-08-10-yearning-3-1-6-2","children":[]},{"level":3,"title":"2023-07-04 Yearning 3.1.5","slug":"_2023-07-04-yearning-3-1-5","link":"#_2023-07-04-yearning-3-1-5","children":[]},{"level":3,"title":"2023-04-24 Yearning 3.1.4","slug":"_2023-04-24-yearning-3-1-4","link":"#_2023-04-24-yearning-3-1-4","children":[]},{"level":3,"title":"2023-03-09 Yearning 3.1.3","slug":"_2023-03-09-yearning-3-1-3","link":"#_2023-03-09-yearning-3-1-3","children":[]},{"level":3,"title":"2023-02-10 Yearning 3.1.2.2","slug":"_2023-02-10-yearning-3-1-2-2","link":"#_2023-02-10-yearning-3-1-2-2","children":[]},{"level":3,"title":"2023-02-01 Yearning 3.1.2.1","slug":"_2023-02-01-yearning-3-1-2-1","link":"#_2023-02-01-yearning-3-1-2-1","children":[]},{"level":3,"title":"2022-11-14 Yearning 3.1.1.1","slug":"_2022-11-14-yearning-3-1-1-1","link":"#_2022-11-14-yearning-3-1-1-1","children":[]},{"level":3,"title":"2022-09-15 Yearning 3.1.0","slug":"_2022-09-15-yearning-3-1-0","link":"#_2022-09-15-yearning-3-1-0","children":[]},{"level":3,"title":"2022-09-01 Yearning 3.0.9","slug":"_2022-09-01-yearning-3-0-9","link":"#_2022-09-01-yearning-3-0-9","children":[]},{"level":3,"title":"2022-08-18 Yearning 3.0.8","slug":"_2022-08-18-yearning-3-0-8","link":"#_2022-08-18-yearning-3-0-8","children":[]},{"level":3,"title":"2022-08-18 Yearning 3.0.7","slug":"_2022-08-18-yearning-3-0-7","link":"#_2022-08-18-yearning-3-0-7","children":[]},{"level":3,"title":"2022-08-11 Yearning 3.0.6","slug":"_2022-08-11-yearning-3-0-6","link":"#_2022-08-11-yearning-3-0-6","children":[]},{"level":3,"title":"2022-08-06 Yearning 3.0.5","slug":"_2022-08-06-yearning-3-0-5","link":"#_2022-08-06-yearning-3-0-5","children":[]},{"level":3,"title":"2022-07-23 Yearning 3.0.4","slug":"_2022-07-23-yearning-3-0-4","link":"#_2022-07-23-yearning-3-0-4","children":[]},{"level":3,"title":"2022-07-19 Yearning 3.0.3","slug":"_2022-07-19-yearning-3-0-3","link":"#_2022-07-19-yearning-3-0-3","children":[]},{"level":3,"title":"2022-06-20 Yearning 3.0.1","slug":"_2022-06-20-yearning-3-0-1","link":"#_2022-06-20-yearning-3-0-1","children":[]},{"level":3,"title":"2022-06-02 Yearning 3.0.0-GA","slug":"_2022-06-02-yearning-3-0-0-ga","link":"#_2022-06-02-yearning-3-0-0-ga","children":[]},{"level":3,"title":"2022-05-27 Yearning 3.0.0-RC13","slug":"_2022-05-27-yearning-3-0-0-rc13","link":"#_2022-05-27-yearning-3-0-0-rc13","children":[]},{"level":3,"title":"2022-05-20 Yearning 3.0.0-RC12","slug":"_2022-05-20-yearning-3-0-0-rc12","link":"#_2022-05-20-yearning-3-0-0-rc12","children":[]},{"level":3,"title":"2022-05-11 Yearning 3.0.0-RC11","slug":"_2022-05-11-yearning-3-0-0-rc11","link":"#_2022-05-11-yearning-3-0-0-rc11","children":[]},{"level":3,"title":"2022-05-09 Yearning 3.0.0-RC10","slug":"_2022-05-09-yearning-3-0-0-rc10","link":"#_2022-05-09-yearning-3-0-0-rc10","children":[]},{"level":3,"title":"2022-05-07 Yearning 3.0.0-RC9","slug":"_2022-05-07-yearning-3-0-0-rc9","link":"#_2022-05-07-yearning-3-0-0-rc9","children":[]},{"level":2,"title":"Change Log","slug":"change-log","link":"#change-log","children":[{"level":3,"title":"2022-05-06 Yearning 3.0.0-RC8","slug":"_2022-05-06-yearning-3-0-0-rc8","link":"#_2022-05-06-yearning-3-0-0-rc8","children":[]}]}]}}
